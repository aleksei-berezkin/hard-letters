<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Speech exercises for kids">
    <title>Hard letters</title>
    <link rel="stylesheet" href="css-global.css">
    <link rel="stylesheet" href="lesson.css">
    <script src="https://w.soundcloud.com/player/api.js"></script>
</head>
<body tabindex="0">

<div id="app">
    <img id="main-img" alt="" src="" />

    <div id="description-overlay" class="overlay-text"></div>
    <div id="sound-cloud-embed">
        <!--        <iframe id="sound-cloud-iframe" width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/564463071&color=%237fb2d6&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/plastic3official" title="Plastic3" target="_blank" style="color: #cccccc; text-decoration: none;">Plastic3</a> · <a href="https://soundcloud.com/plastic3official/sets/happy-kids-pou-game-music" title="Happy Kids. Pou Game Music" target="_blank" style="color: #cccccc; text-decoration: none;">Happy Kids. Pou Game Music</a></div>-->
        <iframe id="sound-cloud-iframe"  scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/1446191623&color=%237fb2d6&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/audiopanda-music" title="Audiopanda" target="_blank" style="color: #cccccc; text-decoration: none;">Audiopanda</a> · <a href="https://soundcloud.com/audiopanda-music/sets/happy-kids-music-fun-cheerful" title="Happy Kids Music: Fun, Cheerful, Playful Instrumental Background Music" target="_blank" style="color: #cccccc; text-decoration: none;">Happy Kids Music: Fun, Cheerful, Playful Instrumental Background Music</a></div>
    </div>
    <div id="attribution" class="overlay-text"></div>
</div>

<div id="play-pause-overlay">
    <svg id="pause-overlay" class="display-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="#000000"><path d="M560-200v-560h160v560H560Zm-320 0v-560h160v560H240Z"/></svg>
    <svg id="play-overlay" class="display-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="#000000"><path d="M320-200v-560l440 280-440 280Z"/></svg>
</div>

<button id="menu-btn">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" fill="#5f6368"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg>
</button>

<div id="params-wrapper" class="hidden">
    <label for="slides-delay">Задержка между слайдами</label><input id="slides-delay" type="range" min="1000" max="8000"/></input>
    <label for="music-volume">Музыка</label><input id="music-volume" type="range" min="0" max="30" step=".25"/></label>
    <label for="voice-name">Голос</label><select id="voice-name"></select></label>
    <label for="voice-picth">Тон голоса</label><input id="voice-pitch" type="range" min="0" max="2" step=".1"/></label>
    <label for="voice-rate">Скорость голоса</label><input id="voice-rate" type="range" min=".1" max="2" step=".1"/></label>
    <div id="default-wrapper">
        <button id="reset-default">По умолчанию</button>
    </div>
</div>

<script type="module">
    import {runLesson, togglePause} from './runLesson.mjs';
    import {initParams} from './params.mjs';

    const lessonId = Number(new URLSearchParams(location.search).get('id'))

    document.addEventListener('DOMContentLoaded', () => runLesson(lessonId))

    document.addEventListener('click', togglePause)
    document.addEventListener('keydown', e => { if (e.key === ' ') togglePause() });

    document.querySelector('#menu-btn').addEventListener('click', function(e) {
        document.querySelector('#params-wrapper').classList.toggle('hidden')

        e.stopPropagation();
        e.preventDefault()
    });

    document.querySelector('#params-wrapper').addEventListener('click', function(e) {
        e.stopPropagation()
        e.preventDefault();
    });

    document.addEventListener('click', () => {
        document.querySelector('#params-wrapper').classList.add('hidden')
    })
    initParams();
</script>

</body>
</html>
